{{define "head"}}
<link href="/static/css/style.css" rel="stylesheet" />
<link href="/static/css/publication.css" rel="stylesheet">
<link href="/static/css/modal.css" rel="stylesheet">
<script defer src="/static/js/purchase-modal.js"></script>
<script src="https://kit.fontawesome.com/a9faad54a1.js" crossorigin="anonymous"></script>
{{end}}

{{define "content"}}
{{if .errLcp}}
<div style="background-color: #ffcccc; padding: 10px;">{{.errLcp}}</div>
{{end}}
<div class="pub-container">
    <div class="pub-left-side">
        <img src="{{.coverUrl}}" alt="book cover"/>
        <div class="pub-actions">
            {{ if .userIsAuthenticated}}
            {{if .licenseIdFound}}
            <a href="/catalog/publication/{{.uuid}}/license">Download <i class="fa-solid fa-cloud-arrow-down"></i></a>
            {{else}}
            <button id="buy">Buy</button>
            <button id="loan">Borrow</button>
            {{ end }}
            {{ else }}
            <div class="login">
                <a href="/signin" id="login-button">Sign In</a>
                <p>or</p>
                <a href="" id="signup-button">Sign Up</a>
            </div>
            {{ end }}
        </div>
    </div>
    <div class="pub-right-side">
        <h1>{{.title}}</h1>
        <div class="authors">
            <p>written by</p>
            {{ range .authors}}
            <h3>{{.}}</h3>
            {{end}}
        </div>
        <div class="pub-categories-tags">
            {{ range .categories}}
            <a href="/catalog?category={{.}}" class="tag">{{.}}</a>
            {{end}}
        </div>
        <div class="summary">
            <h4>Summary</h4>
            <p>{{.description}}</p>
        </div>
    </div>
</div>
<div class="related">
    <h4>More from this author</h4>
    <div class="related-pub">
        <a href="#"><img src="" class="related-pub-cover"/></a>
        <a href="#"><img src="" class="related-pub-cover"/></a>
        <a href="#"><img src="" class="related-pub-cover"/></a>
    </div>
</div>

<div class="fade" id="modal-window" tabindex="-1" style="display: none;" aria-hidden="true">
    <aside id="modal" class="modal" aria-hidden="true" aria-labelledby="modal">
        <div class="modal-wrapper js-modal-stop">
            <div class="modal-body-publications">
                <form  id="buyForm" class="modal-form-options" action="/catalog/publication/{{.uuid}}/buy" method="GET">
                    <div class="select-global-options">
                        <label for="copyRights">Number Of Copies</label>
                        <input id="copyRights" name="copyRights" type="number" value="500">
                        <label for="printRights">Number Of Prints</label>
                        <input id="printRights" name="printRights" type="number" value="10">
                    </div>
                    <div class="modal-loan-buttons">
                        <button class="modal-button back-button" id="backButtonBuy"><i class="fa-solid fa-rotate-left"></i> Back</button>
                        <button type="submit" value="Buy"  class="modal-button"><i class="fa-solid fa-check"></i> Validate</button>
                    </div>
                </form>
                <form  id="loanForm" class="modal-form-options" action="/catalog/publication/{{.uuid}}/loan" method="GET">
                    <div class="select-global-options">
                        <label for="copyRights">Number Of Copies</label>
                        <input id="copyRights" name="copyRights" type="number" value="500">
                        <label for="printRights">Number Of Prints</label>
                        <input id="printRights" name="printRights" type="number" value="10">
                    </div>
                    <div class="select-loan-dates">
                        <label for="startDateLocal">Start Date</label>
                        <input id="startDateLocal" name="start-date" type="datetime-local" required>
                        <label for="endDateLocal">End Date</label>
                        <input id="endDateLocal" name="end-date" type="datetime-local" required>
                        <input id="startDate" name="startDate" type="text" hidden>
                        <input id="endDate" name="endDate" type="text" hidden>
                    </div>
                    <div class="modal-loan-buttons">
                        <button class="modal-button back-button" id="backButtonLoan"><i class="fa-solid fa-rotate-left"></i> Back</button>
                        <button type="submit" value="Loan" class="modal-button"><i class="fa-solid fa-check"></i> Validate</button>
                    </div>
                </form>
            </div>
        </div>
    </aside>
</div>
{{end}}